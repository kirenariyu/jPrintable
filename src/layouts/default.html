{{!-- This is the base layout for your project, and will be used on every page unless specified. --}}

<!doctype html>
<html class="no-js" lang="en">
  <head>
    <meta charset="UTF-8">
    <title>Print Responsively</title>
    <meta name="author" content="Yumi Takuma">
    <meta name="description" content="Print Responsively">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="icon" type="image/png" href="asset/simg/favicon.ico" />
    <link href="https://fonts.googleapis.com/css?family=Parisienne|Quicksand|Raleway:400,500,700,800|Roboto&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="{{root}}assets/css/app.css">
  </head>
<body>
  <header id="main-nav" class="contain-to-grid data-sticky-container">
    <div class="top-bar" data-topbar role="navigation" data-sticky data-margin-top="0" data-sticky-on="small">
      <div class="top-bar-left">
        <ul class="menu author">
          <li><a href="index.html"><span>PRINT RESPONSIVELY</span></a></li>
        </ul>
      </div>
      <div class="top-bar-right">
        <div class="show-for-small-only menu small-12 float-right">
          <a href="#" id="little-menu"><i class="fi-list"></i></a>
        </div>
        <ul class="show-for-medium menu small-12">
          <li><a href="simple.html">Simple</a></li>
          <li><a href="fixed-header.html">Fixed Header</a></li>
          <li><a href="fixed-footer.html">Fixed Footer</a></li>
          <li><a href="payslip.html">Payslip</a></li>
        </ul>
      </div>
    </div>
  </header>

{{!-- Pages you create in the src/pages/ folder are inserted here when the flattened page is created. --}}
{{> body}}

<footer>
  <div class="grid-x-container grid-x fluid">
    <div class="cell small-4 columns">
      <span class="show-for-medium">Fork me on GitHub! &nbsp; </span><a href="https://github.com/yumicchi"><u><i class="fi-social-github"></i> yumicchi</u></a>
    </div>
    <div class="cell small-8 columns text-right">
      <span class="show-for-small"><a href="mailto:yumitakuma@outlook.com"><u>Email me</u></a></span><span class="show-for-large">Email me at <a href="mailto:yumitakuma@outlook.com"><u>yumitakuma@outlook.com</u></a></span> or send <a id="help" href="help.html"><div id="help-button"><span>HELP</span></div><u class="hide" id="help-text">help</u></a>.
    </div>
  </div>
</footer>

<script src="{{root}}assets/js/app.js"></script>
<script>
  $(document).foundation();
  $(document).ready(function() {
    $('#little-menu').click(function() {
      var ico	= $(this).find('i'),
        ul	= $(this).parent().next();

      if (ico.hasClass('fi-list') && ul.hasClass('show-for-medium')) {
        ul.removeClass('show-for-medium').css('top', $('#main-nav').outerHeight() + 'px').addClass('slideDown');
        setTimeout(function() {
          ico.removeClass().addClass('fi-x');
        }, 800);
      } else if (ico.hasClass('fi-x') && ul.hasClass('slideDown')) {
        ul.addClass('slideUp').removeClass('slideDown').css('top', '');
        setTimeout(function() {
          ul.addClass('show-for-medium').removeClass('slideUp');
          ico.removeClass().addClass('fi-list');
        }, 800);
      }
    });
                
    $('.dt-responsive').DataTable({
      autoWidth: true,
      info: false,
      ordering: false,
      paging: false,
      responsive: true,
      searching: false
    });

    $('#email-form').validate({
      messages: {
        name: 'Wait a minute, who are you?',
        email: 'I love emails.',
        'body-msg': 'Uhm... We need a topic.'
      },
      submitHandler: function(form) {
        form.submit();
      }
    });

    $('#send-love').click(function() {
      if ($('#email-form').valid()) {
        $('#loading').foundation('open');
        Email.send({
          Host : 'smtp.elasticemail.com',
          Username : 'yumitakuma@outlook.com',
          Password : '833ba632-d222-4b1d-b75b-451fe271519a',
          To : 'yumitakuma@outlook.com',
          From : $('#email').val(),
          Subject : $('#subject').val() + ' | ' + $('#subject-msg').val(),
          Body : $('#body-msg').val() + ' <==> ' + $('#name').val()
        }).then(function() {
          $('#loading').foundation('close');
          $('#name, #email, #subject, #subject-msg, #body-msg').val('');
          $('#time').html(new Date(new Date().toLocaleString("en-US", {timeZone: "Asia/Manila"})).toLocaleTimeString());
          $('#love-status').foundation('open');
        });
      }
    });

    var help = $('#help'),
      orig_offset = help.offset().top + help.outerHeight();

    var right;

    $(window).bind('load resize', function() {
      right = $('#help-button').css('margin-bottom');
    });

    $(window).bind('scroll load resize', function() {
      var scroll = $(this).scrollTop() + $(this).height();

      if (scroll > orig_offset) {
        help.css({ 'position': 'relative', 'right': '0' });
        help.find('#help-button').addClass('hide');
        help.find('#help-text').removeClass('hide');
      }
      if (scroll < orig_offset) {
        help.css({ 'position': 'fixed', 'right': right });
        help.find('#help-button').removeClass('hide');
        help.find('#help-text').addClass('hide');
      }
    });
  });
</script>
</body>
</html>
